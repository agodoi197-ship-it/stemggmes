<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Steam no Precinho</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
    font-family: Arial, sans-serif;
    background: radial-gradient(circle at top, #111, #000);
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    color:white;
}

.card{
    background:#121212;
    width:400px;
    padding:35px;
    border-radius:20px;
    box-shadow:0 0 50px rgba(0,255,120,0.15);
    text-align:center;
}

h1{
    color:#00ff88;
    margin-bottom:15px;
}

.preco{
    font-size:30px;
    font-weight:bold;
    margin:15px 0;
}

input{
    width:100%;
    padding:10px;
    margin:6px 0;
    border-radius:8px;
    border:none;
}

button{
    width:100%;
    padding:12px;
    margin-top:8px;
    border:none;
    border-radius:10px;
    background:#00ff88;
    font-weight:bold;
    cursor:pointer;
}

button:hover{
    background:#00cc66;
}

#pixArea{display:none;margin-top:15px;}
#admin{display:none;margin-top:20px;background:#1e1e1e;padding:15px;border-radius:15px;}
#cuponsLista{margin-top:10px;font-size:13px;color:#00ff88;}
#tempoRestante{font-size:14px;margin-top:8px;color:#00ff88;}
</style>
</head>
<body>

<div class="card">

<h1>Steam no Precinho</h1>

<div class="preco" id="preco">R$ 49,90</div>

<input type="text" id="cupomInput" placeholder="Cupom">
<button onclick="aplicarCupom()">Aplicar Cupom</button>

<div id="tempoRestante"></div>

<button onclick="comprar()">Comprar Agora</button>

<div id="pixArea">
    <p><b>Chave Pix:</b></p>
    <p id="chavePix">7fdb18d2-069d-4454-8ec7-09f52ac4efdc</p>
    <button onclick="copiarPix()">Copiar</button>
</div>

<!-- ADMIN -->
<div id="admin">
    <h3>Painel Admin</h3>
    <p>Total cliques: <span id="cliques">0</span></p>

    <input type="text" id="novoCodigo" placeholder="Nome do cupom">
    <input type="number" id="novoDesconto" placeholder="% desconto">
    <input type="number" id="novaDuracao" placeholder="Duração (horas)">
    <button onclick="criarCupom()">Criar Cupom</button>

    <div id="cuponsLista"></div>
</div>

</div>

<script>
let precoOriginal = 49.90;
let cupons = [];
let totalCliques = 0;

function comprar(){
    totalCliques++;
    document.getElementById("cliques").innerText = totalCliques;
    document.getElementById("pixArea").style.display="block";
}

function copiarPix(){
    let chave = document.getElementById("chavePix").innerText;
    navigator.clipboard.writeText(chave);
    alert("Copiado!");
}

function criarCupom(){
    let codigo = document.getElementById("novoCodigo").value;
    let desconto = parseFloat(document.getElementById("novoDesconto").value);
    let duracao = parseFloat(document.getElementById("novaDuracao").value);

    let cupom = {
        codigo,
        desconto,
        expira: Date.now() + (duracao * 60 * 60 * 1000)
    };

    cupons.push(cupom);
    atualizarLista();
}

function atualizarLista(){
    let lista = "";
    cupons.forEach(c=>{
        lista += Cupom: ${c.codigo} - ${c.desconto}%<br>;
    });
    document.getElementById("cuponsLista").innerHTML = lista;
}

function aplicarCupom(){
    let codigoDigitado = document.getElementById("cupomInput").value;

    let cupom = cupons.find(c => c.codigo === codigoDigitado);

    if(!cupom){
        alert("Cupom inválido");
        return;
    }

    if(Date.now() > cupom.expira){
        alert("Cupom expirado");
        return;
    }

    let desconto = precoOriginal * (cupom.desconto/100);
    let novoPreco = (precoOriginal - desconto).toFixed(2);

    document.getElementById("preco").innerText = "R$ " + novoPreco;

    iniciarContador(cupom.expira);
}

function iniciarContador(expira){
    let intervalo = setInterval(()=>{
        let restante = expira - Date.now();

        if(restante <= 0){
            clearInterval(intervalo);
            document.getElementById("tempoRestante").innerText="Cupom expirado";
            document.getElementById("preco").innerText="R$ 49,90";
            return;
        }

        let h = Math.floor(restante/3600000);
        let m = Math.floor((restante%3600000)/60000);
        let s = Math.floor((restante%60000)/1000);

        document.getElementById("tempoRestante").innerText=
        Expira em ${h}h ${m}m ${s}s;
    },1000);
}

/* abrir admin com Ctrl + Shift + A */
document.addEventListener("keydown", function(e){
    if(e.ctrlKey && e.shiftKey && e.key==="A"){
        let senha = prompt("Senha:");
        if(senha==="Brasil"){
            document.getElementById("admin").style.display="block";
        }
    }
});
</script>

</body>
</html>
