<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Steam no Precinho</title>

<style>
body{
    background:#0f0f0f;
    color:white;
    font-family:Arial;
    text-align:center;
    padding-top:50px;
}

.container{
    background:#1c1c1c;
    padding:30px;
    width:350px;
    margin:auto;
    border-radius:15px;
}

button{
    padding:10px;
    margin-top:10px;
    width:100%;
    background:#00ff88;
    border:none;
    border-radius:8px;
    font-weight:bold;
    cursor:pointer;
}

input{
    width:100%;
    padding:8px;
    margin-top:8px;
    border-radius:6px;
    border:none;
}

#pixArea{
    display:none;
    margin-top:15px;
}

#admin{
    display:none;
    margin-top:20px;
    background:#111;
    padding:15px;
    border-radius:10px;
}
</style>
</head>
<body>

<div class="container">

<h1>Steam no Precinho</h1>

<h2 id="preco">R$ 49,90</h2>

<input type="text" id="cupomInput" placeholder="Cupom">
<button id="btnCupom">Aplicar Cupom</button>

<p id="contador"></p>

<button id="btnComprar">Comprar Agora</button>

<div id="pixArea">
    <p>Chave Pix:</p>
    <p id="pix">7fdb18d2-069d-4454-8ec7-09f52ac4efdc</p>
    <button id="btnCopiar">Copiar Pix</button>
</div>

<div id="admin">
    <h3>Painel Admin</h3>
    <input type="text" id="codigoNovo" placeholder="Código">
    <input type="number" id="descontoNovo" placeholder="% desconto">
    <input type="number" id="horasNovo" placeholder="Duração (horas)">
    <button id="btnCriar">Criar Cupom</button>
</div>

</div>

<script>

let precoOriginal = 49.90;
let cupomAtivo = null;

document.getElementById("btnComprar").onclick = function(){
    document.getElementById("pixArea").style.display="block";
};

document.getElementById("btnCopiar").onclick = function(){
    let texto = document.getElementById("pix").innerText;
    navigator.clipboard.writeText(texto);
    alert("Pix copiado!");
};

document.getElementById("btnCriar").onclick = function(){
    let codigo = document.getElementById("codigoNovo").value;
    let desconto = parseFloat(document.getElementById("descontoNovo").value);
    let horas = parseFloat(document.getElementById("horasNovo").value);

    cupomAtivo = {
        codigo: codigo,
        desconto: desconto,
        expira: Date.now() + (horas * 3600000)
    };

    alert("Cupom criado!");
};

document.getElementById("btnCupom").onclick = function(){

    let digitado = document.getElementById("cupomInput").value;

    if(!cupomAtivo){
        alert("Nenhum cupom criado.");
        return;
    }

    if(digitado !== cupomAtivo.codigo){
        alert("Cupom inválido.");
        return;
    }

    if(Date.now() > cupomAtivo.expira){
        alert("Cupom expirado.");
        return;
    }

    let desconto = precoOriginal * (cupomAtivo.desconto/100);
    let novoPreco = (precoOriginal - desconto).toFixed(2);

    document.getElementById("preco").innerText = "R$ " + novoPreco;

    iniciarContador(cupomAtivo.expira);
};

function iniciarContador(expira){

    let intervalo = setInterval(function(){

        let restante = expira - Date.now();

        if(restante <= 0){
            clearInterval(intervalo);
            document.getElementById("contador").innerText = "Cupom expirado";
            document.getElementById("preco").innerText = "R$ 49,90";
            return;
        }

        let h = Math.floor(restante/3600000);
        let m = Math.floor((restante%3600000)/60000);
        let s = Math.floor((restante%60000)/1000);

        document.getElementById("contador").innerText =
        "Expira em: " + h + "h " + m + "m " + s + "s";

    },1000);
}

/* abrir admin */
document.addEventListener("keydown", function(e){
    if(e.ctrlKey && e.shiftKey && e.key==="A"){
        let senha = prompt("Senha:");
        if(senha==="1234"){
            document.getElementById("admin").style.display="block";
        }
    }
});

</script>

</body>
</html>
