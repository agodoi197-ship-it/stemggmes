<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EBMG Games</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0f0f0f;
  color:white;
  text-align:center;
}

.container{
  margin-top:80px;
}

button{
  padding:12px 25px;
  margin:10px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-weight:bold;
}

.buy{
  background:#00ff88;
}

.admin-btn{
  background:#444;
  position:fixed;
  bottom:20px;
  right:20px;
}

.hidden{
  display:none;
}

.admin-panel{
  background:#1a1a1a;
  padding:20px;
  margin-top:20px;
  border-radius:10px;
  width:90%;
  max-width:500px;
  margin-left:auto;
  margin-right:auto;
}

input{
  padding:8px;
  margin:5px;
  border-radius:6px;
  border:none;
}
</style>
</head>
<body>

<div class="container">
  <h1>EBMG Games</h1>
  <h2 id="price">R$ 49,90</h2>

  <input type="text" id="couponInput" placeholder="Cupom de desconto">
  <button onclick="applyCoupon()">Aplicar Cupom</button>

  <br>
  <button class="buy" onclick="buy()">Comprar Agora</button>

  <div id="paymentArea" class="hidden">
    <h3>Pagamento via Pix</h3>

    <p><strong>Chave Pix:</strong></p>
    <input type="text" value="7fdb18d2-069d-4454-8ec7-09f52ac4efdc" id="pixKey" readonly>
    <button onclick="copyPix()">Copiar</button>

    <br><br>

    <a id="whatsappLink" target="_blank">
      <button style="background:#25D366;">Enviar Comprovante</button>
    </a>
  </div>
</div>

<button class="admin-btn" onclick="openAdmin()">Admin</button>

<div id="adminLogin" class="hidden admin-panel">
  <h3>Login Admin</h3>
  <input type="password" id="adminPass" placeholder="Senha">
  <button onclick="loginAdmin()">Entrar</button>
</div>

<div id="adminPanel" class="hidden admin-panel">
  <h3>Painel Admin</h3>

  <p>Total cliques em Comprar: <span id="clickCount">0</span></p>

  <h4>Criar Cupom</h4>
  <input type="text" id="newCouponName" placeholder="Nome do cupom">
  <input type="number" id="newCouponValue" placeholder="% desconto">
  <input type="number" id="newCouponDays" placeholder="Validade (dias)">
  <button onclick="createCoupon()">Criar</button>

  <h4>Cupons Ativos</h4>
  <div id="couponList"></div>

  <button onclick="logoutAdmin()">Sair</button>
</div>

<script>

let price = 49.90
let clicks = localStorage.getItem("clicks") || 0
let coupons = JSON.parse(localStorage.getItem("coupons")) || {}

document.getElementById("clickCount").innerText = clicks
updateCouponList()

// CONFIGURE SEU NÚMERO AQUI (sem espaço e sem traço)
let whatsappNumber = "5566999761232"

function buy(){
  clicks++
  localStorage.setItem("clicks", clicks)
  document.getElementById("clickCount").innerText = clicks

  let message = "Olá, fiz o pagamento e segue o comprovante."
  document.getElementById("whatsappLink").href =
    "https://wa.me/" + whatsappNumber + "?text=" + encodeURIComponent(message)

  document.getElementById("paymentArea").classList.remove("hidden")
}

function copyPix(){
  let pix = document.getElementById("pixKey")
  pix.select()
  document.execCommand("copy")
  alert("Chave Pix copiada!")
}

function applyCoupon(){
  let code = document.getElementById("couponInput").value
  let now = new Date().getTime()

  if(coupons[code]){

    if(now > coupons[code].expires){
      alert("Cupom expirado!")
      return
    }

    let discount = coupons[code].discount
    let finalPrice = price - (price * discount / 100)
    document.getElementById("price").innerText = "R$ " + finalPrice.toFixed(2)

    coupons[code].used++
    localStorage.setItem("coupons", JSON.stringify(coupons))
    updateCouponList()

    alert("Cupom aplicado!")
  } else {
    alert("Cupom inválido")
  }
}

function openAdmin(){
  document.getElementById("adminLogin").classList.remove("hidden")
}

function loginAdmin(){
  let pass = document.getElementById("adminPass").value
  if(pass === "1234"){ // TROQUE SUA SENHA
    document.getElementById("adminLogin").classList.add("hidden")
    document.getElementById("adminPanel").classList.remove("hidden")
  } else {
    alert("Senha incorreta")
  }
}

function logoutAdmin(){
  document.getElementById("adminPanel").classList.add("hidden")
}

function createCoupon(){
  let name = document.getElementById("newCouponName").value
  let value = document.getElementById("newCouponValue").value
  let days = document.getElementById("newCouponDays").value

  let expireDate = new Date().getTime() + (days * 24 * 60 * 60 * 1000)

  coupons[name] = {
    discount: parseInt(value),
    used: 0,
    expires: expireDate
  }

  localStorage.setItem("coupons", JSON.stringify(coupons))
  updateCouponList()
  alert("Cupom criado!")
}

function deleteCoupon(name){
  delete coupons[name]
  localStorage.setItem("coupons", JSON.stringify(coupons))
  updateCouponList()
}

function updateCouponList(){
  let list = document.getElementById("couponList")
  list.innerHTML = ""

  let now = new Date().getTime()

  for(let code in coupons){

    let status = now > coupons[code].expires ? " (Expirado)" : " (Ativo)"

    list.innerHTML += `
      <p>
        ${code} - ${coupons[code].discount}% 
        | Usado: ${coupons[code].used} vezes 
        ${status}
        <button onclick="deleteCoupon('${code}')">Remover</button>
      </p>
    `
  }
}

</script>

</body>
</html>
